<div class="signup-container">
  <div class="right-section">
    <div class="signup-content">
      <img src="../../assets/logo.png" alt="KeepMe Logo" class="logo-image">

      <div class="signup-card">
        <div class="progress-indicator">
          <div class="progress-bar">
            <div class="progress-fill" [style.width.%]="progress"></div>
          </div>
          <span class="progress-text">Étape {{currentStep}}/3</span>
        </div>

        <div class="card-header">
          <h2 class="card-title">Créez votre compte</h2>
          <p class="card-subtitle">Rejoignez notre communauté de confiance</p>
        </div>
        
        <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="signup-form">
          
          <!-- Étape 1 -->
          <div class="form-step" *ngIf="currentStep === 1">
            <div class="form-row">
              <div class="form-group">
                <label class="input-label">
                  Nom
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    type="text" 
                    formControlName="lastName"
                    placeholder="Votre nom"
                    class="form-input"
                    [class.error]="lastName?.invalid && lastName?.touched">
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M10 10a5 5 0 100-10 5 5 0 000 10zM10 12c-5.523 0-10 3.582-10 8 0 1.5 1 2 2 2h16c1 0 2-.5 2-2 0-4.418-4.477-8-10-8z"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="lastName?.invalid && lastName?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Le nom est requis
                </span>
              </div>

              <div class="form-group">
                <label class="input-label">
                  Prénom
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    type="text" 
                    formControlName="firstName"
                    placeholder="Votre prénom"
                    class="form-input"
                    [class.error]="firstName?.invalid && firstName?.touched">
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M10 10a5 5 0 100-10 5 5 0 000 10zM10 12c-5.523 0-10 3.582-10 8 0 1.5 1 2 2 2h16c1 0 2-.5 2-2 0-4.418-4.477-8-10-8z"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="firstName?.invalid && firstName?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Le prénom est requis
                </span>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="input-label">
                  Téléphone
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    type="tel" 
                    formControlName="phone"
                    placeholder="+33 1 23 45 67 89"
                    class="form-input"
                    [class.error]="phone?.invalid && phone?.touched">
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="phone?.invalid && phone?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Un numéro de téléphone valide est requis
                </span>
              </div>

              <div class="form-group">
                <label class="input-label">
                  Genre
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <select 
                    formControlName="gender"
                    class="form-input"
                    [class.error]="gender?.invalid && gender?.touched">
                    <option value="">Sélectionnez</option>
                    <option value="male">Homme</option>
                    <option value="female">Femme</option>
                    <option value="other">Autre</option>
                  </select>
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="gender?.invalid && gender?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Le genre est requis
                </span>
              </div>
            </div>

            <div class="form-group">
              <label class="input-label">
                État matrimonial
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <select 
                  formControlName="maritalStatus"
                  class="form-input"
                  [class.error]="maritalStatus?.invalid && maritalStatus?.touched">
                  <option value="">Sélectionnez</option>
                  <option value="single">Célibataire</option>
                  <option value="married">Marié(e)</option>
                  <option value="divorced">Divorcé(e)</option>
                  <option value="widowed">Veuf/Veuve</option>
                </select>
                <span class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </span>
              </div>
              <span class="error-message" *ngIf="maritalStatus?.invalid && maritalStatus?.touched">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                L'état matrimonial est requis
              </span>
            </div>

            <div class="form-group">
              <label class="input-label">
                Adresse complète
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <input 
                  type="text" 
                  formControlName="address"
                  placeholder="Votre adresse complète"
                  class="form-input"
                  [class.error]="address?.invalid && address?.touched">
                <span class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/>
                  </svg>
                </span>
              </div>
              <span class="error-message" *ngIf="address?.invalid && address?.touched">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                L'adresse est requise
              </span>
            </div>
          </div>

          <!-- Étape 2 -->
          <div class="form-step" *ngIf="currentStep === 2">
            <div class="form-group">
              <label class="input-label">
                E-mail
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <input 
                  type="email" 
                  formControlName="email"
                  placeholder="votre@email.com"
                  class="form-input"
                  [class.error]="email?.invalid && email?.touched">
                <span class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                    <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
                  </svg>
                </span>
              </div>
              <span class="error-message" *ngIf="email?.invalid && email?.touched">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                Veuillez entrer un email valide
              </span>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="input-label">
                  Numéro de CIN
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    type="text" 
                    formControlName="cin"
                    placeholder="Votre numéro CIN"
                    class="form-input"
                    [class.error]="cin?.invalid && cin?.touched">
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="cin?.invalid && cin?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Le numéro CIN est requis
                </span>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label class="input-label">
                  Mot de passe
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    [type]="showPassword ? 'text' : 'password'"
                    formControlName="password"
                    placeholder="Votre mot de passe"
                    class="form-input"
                    [class.error]="password?.invalid && password?.touched">
                  <span class="input-icon password-toggle" (click)="togglePasswordVisibility()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path *ngIf="!showPassword" d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                      <path d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="password?.invalid && password?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Le mot de passe doit contenir au moins 6 caractères
                </span>
              </div>

              <div class="form-group">
                <label class="input-label">
                  Confirmer le mot de passe
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <input 
                    [type]="showConfirmPassword ? 'text' : 'password'"
                    formControlName="confirmPassword"
                    placeholder="Confirmez votre mot de passe"
                    class="form-input"
                    [class.error]="confirmPassword?.invalid && confirmPassword?.touched">
                  <span class="input-icon password-toggle" (click)="toggleConfirmPasswordVisibility()">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path *ngIf="!showConfirmPassword" d="M10 12a2 2 0 100-4 2 2 0 000 4z"/>
                      <path d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="confirmPassword?.invalid && confirmPassword?.touched">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                  </svg>
                  Les mots de passe ne correspondent pas
                </span>
              </div>
            </div>

            <div class="form-group checkbox-group">
              <label class="checkbox-label">
                <input 
                  type="checkbox" 
                  formControlName="terms"
                  class="checkbox-input">
                <span class="checkbox-custom"></span>
                J'ai lu les conditions générales et j'accepte
                <span class="required-star">*</span>
              </label>
              <span class="error-message" *ngIf="terms?.invalid && terms?.touched">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                  <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                  <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                Vous devez accepter les conditions générales
              </span>
            </div>
          </div>

          <!-- Étape 3 - Information professionnelle -->
          <div class="form-step" *ngIf="currentStep === 3">
            <div class="section-title">
              <h3>Information professionnelle</h3>
            </div>

            <!-- Upload Photo de Profile -->
            <div class="form-group">
              <label class="input-label">
                Télécharger une photo de profile
                <span class="required-star">*</span>
              </label>
              <div class="file-upload-container" 
                   (drop)="onFileDrop($event, 'profile')"
                   (dragover)="onDragOver($event)"
                   (click)="fileInputProfile.click()">
                <input type="file" #fileInputProfile 
                       (change)="onFileSelected($event, 'profile')"
                       accept="image/*" class="file-input">
                <div class="upload-content" [class.has-file]="profilePhoto">
                  <div class="upload-icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                      <path d="M32.5 12.5C32.5 9.4625 30.0375 7 27 7C24.8525 7 23.0175 8.2275 22.125 10.05C21.4875 9.7875 20.775 9.625 20 9.625C17.325 9.625 15.125 11.825 15.125 14.5C15.125 14.8875 15.175 15.2625 15.2625 15.625C13.1125 16.3625 11.5 18.3625 11.5 20.75C11.5 23.85 14.1 26.375 17.25 26.375H32.375C35.1 26.375 37.375 24.1 37.375 21.375C37.375 18.65 35.1 16.375 32.375 16.375C32.2375 16.375 32.1125 16.3875 31.975 16.4C31.9875 16.2625 32 16.1375 32 16C32 14.075 30.425 12.5 28.5 12.5C28.2375 12.5 28 12.525 27.75 12.575C27.525 12.35 27.275 12.15 27 12C27.85 11.175 28.875 10.625 30 10.625C31.65 10.625 33.0625 11.6625 33.7125 13.1125C33.8125 12.9875 33.925 12.875 34.05 12.775C33.425 11.525 32.275 10.625 30.875 10.625C29.475 10.625 28.325 11.525 27.7 12.775C27.575 12.875 27.6875 12.9875 27.7875 13.1125C28.4375 11.6625 29.85 10.625 31.5 10.625C32.625 10.625 33.65 11.175 34.5 12C34.225 12.15 33.975 12.35 33.75 12.575C33.5 12.525 33.2625 12.5 33 12.5H32.5Z"/>
                    </svg>
                  </div>
                  <div class="upload-text">
                    <p class="upload-title">Parcourir la photo ou la déposer ici</p>
                    <p class="upload-subtitle">Une photo de plus de 400 pixels</p>
                  </div>
                  <div class="file-preview" *ngIf="profilePhoto">
                    <img [src]="profilePhotoPreview" alt="Preview" class="preview-image">
                    <button type="button" class="remove-file" (click)="removeFile('profile', $event)">×</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Niveau d'étude et Langues -->
            <div class="form-row">
              <div class="form-group">
                <label class="input-label">
                  Votre niveau d'étude
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <select 
                    formControlName="educationLevel"
                    class="form-input"
                    [class.error]="educationLevel?.invalid && educationLevel?.touched">
                    <option value="">Sélectionnez</option>
                    <option value="bac">Bac</option>
                    <option value="bac+2">Bac+2</option>
                    <option value="bac+3">Bac+3</option>
                    <option value="bac+5">Bac+5</option>
                    <option value="doctorat">Doctorat</option>
                  </select>
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="educationLevel?.invalid && educationLevel?.touched">
                  Le niveau d'étude est requis
                </span>
              </div>

              <div class="form-group">
                <label class="input-label">
                  Langue
                  <span class="required-star">*</span>
                </label>
                <div class="input-container">
                  <select 
                    formControlName="language"
                    class="form-input"
                    [class.error]="language?.invalid && language?.touched">
                    <option value="">Sélectionnez</option>
                    <option value="french">Français</option>
                    <option value="english">Anglais</option>
                    <option value="spanish">Espagnol</option>
                    <option value="arabic">Arabe</option>
                  </select>
                  <span class="input-icon">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                    </svg>
                  </span>
                </div>
                <span class="error-message" *ngIf="language?.invalid && language?.touched">
                  La langue est requise
                </span>
              </div>
            </div>

            <!-- Niveau de langue -->
            <div class="form-group">
              <label class="input-label">
                Niveau de langue
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <select 
                  formControlName="languageLevel"
                  class="form-input"
                  [class.error]="languageLevel?.invalid && languageLevel?.touched">
                  <option value="">Sélectionnez votre niveau</option>
                  <option value="beginner">Débutant</option>
                  <option value="intermediate">Intermédiaire</option>
                  <option value="advanced">Avancé</option>
                  <option value="fluent">Courant</option>
                  <option value="native">Natif</option>
                </select>
                <span class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </span>
              </div>
              <span class="error-message" *ngIf="languageLevel?.invalid && languageLevel?.touched">
                Le niveau de langue est requis
              </span>
            </div>

            <!-- Biographie -->
            <div class="form-group">
              <label class="input-label">
                Biographie
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <textarea 
                  formControlName="biography"
                  placeholder="Décrivez votre parcours professionnel et vos compétences..."
                  class="form-input textarea"
                  rows="4"
                  [class.error]="biography?.invalid && biography?.touched"></textarea>
              </div>
              <span class="error-message" *ngIf="biography?.invalid && biography?.touched">
                La biographie est requise
              </span>
            </div>

            <!-- Disponibilités -->
            <div class="form-group">
              <label class="input-label">
                Disponibilités (jours/semaine)
                <span class="required-star">*</span>
              </label>
              <div class="input-container">
                <select 
                  formControlName="availability"
                  class="form-input"
                  [class.error]="availability?.invalid && availability?.touched">
                  <option value="">Sélectionnez</option>
                  <option value="1">1 jour/semaine</option>
                  <option value="2">2 jours/semaine</option>
                  <option value="3">3 jours/semaine</option>
                  <option value="4">4 jours/semaine</option>
                  <option value="5">5 jours/semaine</option>
                  <option value="6">6 jours/semaine</option>
                  <option value="7">7 jours/semaine</option>
                </select>
                <span class="input-icon">
                  <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                  </svg>
                </span>
              </div>
              <span class="error-message" *ngIf="availability?.invalid && availability?.touched">
                Les disponibilités sont requises
              </span>
            </div>

            <!-- Upload CV -->
            <div class="form-group">
              <label class="input-label">
                Télécharger votre CV
                <span class="required-star">*</span>
              </label>
              <div class="file-upload-container" 
                   (drop)="onFileDrop($event, 'cv')"
                   (dragover)="onDragOver($event)"
                   (click)="fileInputCv.click()">
                <input type="file" #fileInputCv 
                       (change)="onFileSelected($event, 'cv')"
                       accept=".pdf,.doc,.docx" class="file-input">
                <div class="upload-content" [class.has-file]="cvFile">
                  <div class="upload-icon">
                    <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                      <path d="M32.5 12.5C32.5 9.4625 30.0375 7 27 7C24.8525 7 23.0175 8.2275 22.125 10.05C21.4875 9.7875 20.775 9.625 20 9.625C17.325 9.625 15.125 11.825 15.125 14.5C15.125 14.8875 15.175 15.2625 15.2625 15.625C13.1125 16.3625 11.5 18.3625 11.5 20.75C11.5 23.85 14.1 26.375 17.25 26.375H32.375C35.1 26.375 37.375 24.1 37.375 21.375C37.375 18.65 35.1 16.375 32.375 16.375C32.2375 16.375 32.1125 16.3875 31.975 16.4C31.9875 16.2625 32 16.1375 32 16C32 14.075 30.425 12.5 28.5 12.5C28.2375 12.5 28 12.525 27.75 12.575C27.525 12.35 27.275 12.15 27 12C27.85 11.175 28.875 10.625 30 10.625C31.65 10.625 33.0625 11.6625 33.7125 13.1125C33.8125 12.9875 33.925 12.875 34.05 12.775C33.425 11.525 32.275 10.625 30.875 10.625C29.475 10.625 28.325 11.525 27.7 12.775C27.575 12.875 27.6875 12.9875 27.7875 13.1125C28.4375 11.6625 29.85 10.625 31.5 10.625C32.625 10.625 33.65 11.175 34.5 12C34.225 12.15 33.975 12.35 33.75 12.575C33.5 12.525 33.2625 12.5 33 12.5H32.5Z"/>
                    </svg>
                  </div>
                  <div class="upload-text">
                    <p class="upload-title">Parcourir le PDF ou le déposer ici</p>
                    <p class="upload-subtitle">Format PDF accepté</p>
                  </div>
                  <div class="file-preview" *ngIf="cvFile">
                    <div class="file-info">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                      </svg>
                      <span class="file-name">{{ cvFile.name }}</span>
                    </div>
                    <button type="button" class="remove-file" (click)="removeFile('cv', $event)">×</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" class="action-btn secondary" *ngIf="currentStep > 1" (click)="previousStep()">
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 010 .708L5.707 8l5.647 5.646a.5.5 0 01-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z" clip-rule="evenodd"/>
              </svg>
              Retour
            </button>
            
            <button type="button" class="action-btn primary" *ngIf="currentStep < 3" (click)="nextStep()" [disabled]="!isCurrentStepValid()">
              Suivant
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L10.293 8 4.646 2.354a.5.5 0 010-.708z" clip-rule="evenodd"/>
              </svg>
            </button>
            
            <button type="submit" class="action-btn primary" *ngIf="currentStep === 3" [disabled]="!isStep3Valid()">
              Valider
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>