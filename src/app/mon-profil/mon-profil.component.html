<div class="profil-container">
    <app-fam-side-bar></app-fam-side-bar>
  <div class="profil-content">
    
    <!-- Header Section -->
    <section class="profil-header">
      <div class="avatar-section">
        <img src="../../assets/image copy 6.png" class="image" >
        <div class="edit-avatar" *ngIf="isEditing" title="Changer la photo">
          âœï¸
        </div>
      </div>
      
      <div class="user-info">
        <h1 class="user-name">{{ user.name }}</h1>
        
        <div class="user-details">
          <div class="user-detail">
            <span class="icon">ğŸ‚</span>
            <span>{{ user.age }} ans</span>
          </div>
          <div class="user-detail">
            <span class="icon">ğŸ“</span>
            <span>{{ user.phone }}</span>
          </div>
          <div class="user-detail">
            <span class="icon">ğŸ“</span>
            <span>{{ user.location }}</span>
          </div>
        </div>
        
        <button 
          class="edit-button"
          (click)="toggleEdit()"
          [disabled]="isLoading">
          <span>{{ isEditing ? 'âœ–' : 'âœï¸' }}</span>
          {{ isEditing ? 'Annuler' : 'Modifier le profil' }}
        </button>
      </div>
    </section>

    <!-- Personal Information Section -->
    <section class="form-section" [class.view-mode]="!isEditing">
      <h2 class="section-title">Informations personnelles</h2>
      
      <div class="personal-info-form">
        <div 
          *ngFor="let field of personalInfoFields" 
          class="form-group"
          [class.full-width]="field.label === 'Adresse complÃ¨te'">
          
          <label class="form-label">{{ field.label }}</label>
          <input
            [type]="field.type"
            [value]="field.value"
            [placeholder]="field.placeholder"
            [disabled]="!isEditing"
            class="form-input"
            (input)="onFieldChange(field, $any($event.target).value)">
        </div>
      </div>
    </section>

    <!-- Password Section -->
    <section class="form-section" *ngIf="isEditing">
      <h2 class="section-title">Changer le mot de passe</h2>
      
      <div class="password-form">
        <div class="form-group">
          <label class="form-label">Mot de passe actuel</label>
          <div class="password-input-group">
            <input
              type="password"
              [(ngModel)]="passwordFields.currentPassword"
              placeholder="Entrez votre mot de passe actuel"
              class="form-input">
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Nouveau mot de passe</label>
          <div class="password-input-group">
            <input
              type="password"
              [(ngModel)]="passwordFields.newPassword"
              placeholder="Entrez votre nouveau mot de passe"
              class="form-input">
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Confirmer le mot de passe</label>
          <div class="password-input-group">
            <input
              type="password"
              [(ngModel)]="passwordFields.confirmPassword"
              placeholder="Confirmez votre nouveau mot de passe"
              class="form-input"
              [class.error]="passwordFields.newPassword !== passwordFields.confirmPassword && passwordFields.confirmPassword !== ''">
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <button 
          class="cancel-button"
          (click)="toggleEdit()"
          [disabled]="isLoading">
          Annuler
        </button>
        
        <button 
          class="save-button"
          (click)="onSubmit()"
          [disabled]="!canSave() || isLoading">
          <span class="loading-spinner" *ngIf="isLoading"></span>
          <span *ngIf="!isLoading">ğŸ’¾</span>
          {{ isLoading ? 'Sauvegarde...' : 'Enregistrer les modifications' }}
        </button>
      </div>
    </section>

  </div>
</div>